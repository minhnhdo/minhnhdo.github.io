<?xml version="1.0"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"> <channel> <title>MrOrdinaire</title> <link>http://minhdo.org</link> <atom:link href="http://minhdo.org/rss.xml" rel="self" type="application/rss+xml" /> <language>en-us</language> <pubDate>Fri, 26 Apr 2013 02:27:39 GMT</pubDate> <item> <title>Adding Github Pages Support to Coleslaw</title> <link>http://minhdo.org/posts/Adding-Github-Pages-Support-to-Coleslaw.html</link> <pubDate>2013-04-21 21:40:32</pubDate> <author>Do Nhat Minh</author> <guid isPermaLink="true">http://minhdo.org/posts/Adding-Github-Pages-Support-to-Coleslaw.html</guid> <category><![CDATA[ #<TAG {1004767B33}> ]]></category><category><![CDATA[ #<TAG {1004767CC3}> ]]></category><category><![CDATA[ #<TAG {1004767E33}> ]]></category><category><![CDATA[ #<TAG {1004767F73}> ]]></category><category><![CDATA[ #<TAG {1004768093}> ]]></category> <description><![CDATA[ 

<p><em>This post wraps up how I hacked <a href="https://github.com/redline6561/coleslaw" >coleslaw</a> to add <a href="http://pages.github.com/" >Github pages</a> integration.</em></p>

<h2>What's missing</h2>

<ol>
<li>Github pages does not support symlinks. Therefore, instead of symlinking <code>index.html</code> to <code>1.html</code>, I should just copy <code>1.html</code> as <code>index.html</code>.</li>
<li>I need a way to robustly parse the domain given in <code>~/.coleslawrc</code>.</li>
</ol>

<h2>Fixing it</h2>

<h3>Symlinks</h3>

<p>For the symlinking problem, I can just change the code from symlinking to copying it over. However, it is safer to change the behavior of the code only when the user explicitly asks for it.</p>

<p>Grepping through the code, I can see that <code>render-indices</code> produces the indices, e.g. <code>1.html</code>, etc., and symlinking <code>1.html</code> to <code>index.html</code>. This is where I should make the modification. I added another argument to <code>render-indices</code> to tell the code to make the symlink or not.</p>

<pre><code><span class="code"><span class="comment">;;;; in src/coleslaw.lisp
</span><span class="comment">; [...]
</span>      <span class="paren1">(<span class="code">when <span class="paren2">(<span class="code">probe-file dir</span>)</span>
        <span class="paren2">(<span class="code">run-program <span class="string">"cp -R ~a ."</span> dir</span>)</span></span>)</span>)
    <span class="paren1">(<span class="code">do-ctypes <span class="paren2">(<span class="code">publish ctype</span>)</span></span>)</span>
    <span class="paren1">(<span class="code">render-indices <span class="paren2">(<span class="code">not <span class="paren3">(<span class="code">github-pages <span class="special">*config*</span></span>)</span></span>)</span></span>)</span>
    <span class="paren1">(<span class="code">render-feeds <span class="paren2">(<span class="code">feeds <span class="special">*config*</span></span>)</span></span>)</span>))
<span class="comment">; [...]
</span>
;;;; in src/indices.lisp
<span class="comment">; [...]
</span>                              :posts <span class="paren1">(<span class="code">subseq content start end</span>)</span>
                              :title "Recent Posts")))

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> render-indices <span class="paren2">(<span class="code">make-symlink-p</span>)</span>
  <span class="string">"Render the indices to view content in groups of size N, by month, and by tag
  (let ((results (by-date (hash-table-values *content*))))
    (dolist (tag (all-tags))
; [...]
                                  :prev (and (plusp i) i)
                                  :next (and (&lt; (* (1+ i) 10) (length results))
                                             (+ 2 i)))))))
  (if make-symlink-p
    (update-symlink "</span>index.html<span class="string">" "</span>1.html<span class="string">")
    (run-program "</span>cp 1.html index.html<span class="string">"))</span></span></span></span></code></pre>

<h3>Domain</h3>

<p>Previously, my ad-hoc solution was to find the first forward-slash in the domain string and substring the domain string from after the second forward-slash. Here's the previous code.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defgeneric</span></i> deploy <span class="paren2">(<span class="code">staging</span>)</span>
  <span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="paren4">(<span class="code">
        <span class="comment">; [...]
</span>        <span class="paren5">(<span class="code">run-program <span class="string">"mv ~a ~a"</span> staging new-build</span>)</span>
        <span class="paren5">(<span class="code">when <span class="paren6">(<span class="code">github <span class="special">*config*</span></span>)</span>
          <span class="paren6">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren1">(<span class="code"><span class="paren2">(<span class="code">cname-filename <span class="paren3">(<span class="code">rel-path <span class="string">""</span> <span class="string">"~a/CNAME"</span> new-build</span>)</span></span>)</span>
                <span class="paren2">(<span class="code">stripped-url <span class="paren3">(<span class="code">subseq <span class="paren4">(<span class="code">domain <span class="special">*config*</span></span>)</span>
                                      <span class="paren4">(<span class="code">+ 2 <span class="paren5">(<span class="code">position <span class="character">#\/</span> <span class="paren6">(<span class="code">domain <span class="special">*config*</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
            <span class="paren1">(<span class="code"><i><span class="symbol">with-open-file</span></i> <span class="paren2">(<span class="code">cname cname-filename
                                   <span class="keyword">:direction</span> <span class="keyword">:output</span>
                                   <span class="keyword">:if-exists</span> <span class="keyword">:supersede</span></span>)</span>
              <span class="paren2">(<span class="code">format cname <span class="string">"~a~%"</span> stripped-url</span>)</span></span>)</span></span>)</span></span>)</span>
        <span class="paren5">(<span class="code">when <span class="paren6">(<span class="code">probe-file prev</span>)</span>
        <span class="comment">; [...]
</span>        </span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre>

<p>Now, I can instead use the <a href="http://puri.b9.com/" >puri</a> library to parse the URL and extract only the domain. Here's the new code using <code>puri</code>.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defgeneric</span></i> deploy <span class="paren2">(<span class="code">staging</span>)</span>
  <span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="paren4">(<span class="code">
        <span class="comment">; [...]
</span>        <span class="paren5">(<span class="code">run-program <span class="string">"mv ~a ~a"</span> staging new-build</span>)</span>
        <span class="paren5">(<span class="code">when <span class="paren6">(<span class="code">github <span class="special">*config*</span></span>)</span>
          <span class="paren6">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren1">(<span class="code"><span class="paren2">(<span class="code">cname-filename <span class="paren3">(<span class="code">rel-path <span class="string">""</span> <span class="string">"~a/CNAME"</span> new-build</span>)</span></span>)</span>
                <span class="paren2">(<span class="code">stripped-url <span class="paren3">(<span class="code">puri:uri-host <span class="paren4">(<span class="code">puri:parse-uri
                                               <span class="paren5">(<span class="code">domain <span class="special">*config*</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
            <span class="paren1">(<span class="code"><i><span class="symbol">with-open-file</span></i> <span class="paren2">(<span class="code">cname cname-filename
                                   <span class="keyword">:direction</span> <span class="keyword">:output</span>
                                   <span class="keyword">:if-exists</span> <span class="keyword">:supersede</span></span>)</span>
              <span class="paren2">(<span class="code">format cname <span class="string">"~a~%"</span> stripped-url</span>)</span></span>)</span></span>)</span></span>)</span>
        <span class="paren5">(<span class="code">when <span class="paren6">(<span class="code">probe-file prev</span>)</span>
        <span class="comment">; [...]
</span>        </span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre>

<p>Of course, I need to add puri as a dependency to coleslaw.</p>

<pre><code><span class="code"><span class="comment">;;;; in coleslaw.asd
</span>               :inferior-shell
               :cl-fad
               :cl-ppcre
               :closer-mop
               :puri)
  :serial t
  :components <span class="paren1">(<span class="code"><span class="paren2">(<span class="code"><span class="keyword">:file</span> <span class="string">"packages"</span></span>)</span>
               <span class="paren2">(<span class="code"><span class="keyword">:file</span> <span class="string">"util"</span></span></span></span></span></span></code></pre>

<h2>Really Wrap Up</h2>

<p>All that's left now is to send a pull request to the original author, which I have already done.</p>
 ]]></description> </item><item> <title>Hacking on coleslaw</title> <link>http://minhdo.org/posts/Hacking-on-coleslaw.html</link> <pubDate>2013-04-19 00:15:32</pubDate> <author>Do Nhat Minh</author> <guid isPermaLink="true">http://minhdo.org/posts/Hacking-on-coleslaw.html</guid> <category><![CDATA[ #<TAG {1006D82253}> ]]></category><category><![CDATA[ #<TAG {1006D823E3}> ]]></category><category><![CDATA[ #<TAG {1006D82553}> ]]></category><category><![CDATA[ #<TAG {1006D82693}> ]]></category><category><![CDATA[ #<TAG {1006D827B3}> ]]></category> <description><![CDATA[ 

<p><em>In this post, I document how I hacked <a href="https://github.com/redline6561/coleslaw" >coleslaw</a> to add <a href="http://pages.github.com/" >Github's pages</a> integration.</em></p>

<h2>What is coleslaw?</h2>

<p>coleslaw is a static blog generator written in Common Lisp, much like <a href="http://jekyllrb.com/" >Jekyll</a>, albeit with less features.</p>

<p>I've been using <a href="http://octopress.org/" >Octopress</a> to generate this site. Since I don't know <a href="http://ruby-lang.org/" >Ruby</a>, and have to intention to learn it, I can't hack on Octopress's code nor on Jekyll's, which is a shame. As I am learning <a href="http://http://en.wikipedia.org/wiki/Common_Lisp/" >Common Lisp</a>, and wanting to work on something in it, switching to coleslaw seems perfect for me.</p>

<h2>Trying coleslaw out</h2>

<p>Here's how I set up and use coleslaw.</p>

<ul>
<li>Install <a href="http://git-scm.com/" >git</a></li>
<li>Set up a bare git repo</li>
</ul>

<pre><code>cd /path/to/repo # this is where the post-receive script is put
git --bare init</code></pre>

<ul>
<li>Install Lisp (I choose <a href="http://sbcl.org/" >sbcl</a>)</li>
<li>Install <a href="http://quicklisp.org/" >Quicklisp</a></li>
<li>Get coleslaw's settings file</li>
</ul>

<pre><code>wget -c https://raw.github.com/redline6561/coleslaw/master/examples/single-site.coleslawrc -O ~/.coleslawrc</code></pre>

<ul>
<li>The settings must be edited accordingly. I find the naming a bit confusing, so I have put some comment below for clarification.</li>
</ul>

<pre><code><span class="code"><span class="paren1">(<span class="code"><span class="keyword">:author</span> <span class="string">"Example Setter"</span>
 <span class="keyword">:deploy</span> <span class="string">"/path/to/deploy"</span> <span class="comment">; this is where coleslaw writes its output
</span> <span class="keyword">:domain</span> <span class="string">"http://blog.example.com"</span>
 <span class="keyword">:feeds</span> <span class="paren2">(<span class="code"><span class="string">"lisp"</span></span>)</span>
 <span class="keyword">:plugins</span> <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">mathjax</span>)</span>
           <span class="paren3">(<span class="code">disqus <span class="keyword">:shortname</span> <span class="string">"my-site-name"</span></span>)</span>
           <span class="paren3">(<span class="code">analytics <span class="keyword">:tracking-code</span> <span class="string">"foo"</span></span>)</span></span>)</span>
 <span class="comment">;; this is where coleslaw writes its temporary output, which gets moved
</span> <span class="comment">;; into :DEPLOY
</span> <span class="keyword">:repo</span> <span class="string">"/path/to/some/temporary/folder/"</span>
 <span class="keyword">:sitenav</span> <span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="keyword">:url</span> <span class="string">"http://example.com/"</span> <span class="keyword">:name</span> <span class="string">"Home"</span></span>)</span>
           <span class="paren3">(<span class="code"><span class="keyword">:url</span> <span class="string">"http://twitter.com/example"</span> <span class="keyword">:name</span> <span class="string">"Twitter"</span></span>)</span>
           <span class="paren3">(<span class="code"><span class="keyword">:url</span> <span class="string">"http://github.com/example"</span> <span class="keyword">:name</span> <span class="string">"Code"</span></span>)</span></span>)</span>
 <span class="keyword">:title</span> <span class="string">"Blog title"</span>
 <span class="keyword">:theme</span> <span class="string">"hyde"</span></span>)</span></span></code></pre>

<ul>
<li>Get <code>post-receive</code> hook script and edit the file according to the instructions inside</li>
</ul>

<pre><code>wget -c https://raw.github.com/redline6561/coleslaw/master/examples/example.post-receive -O /path/to/repo/hooks/post-receive
# edit the file</code></pre>

<ul>
<li>Make the script executable</li>
</ul>

<pre><code>chmod +x /path/to/repo/hooks/post-receive</code></pre>

<ul>
<li>Create another repository to hold posts</li>
</ul>

<pre><code>cd /path/to/posts
git init</code></pre>

<ul>
<li>Add the bare repo as a remote of the posts repo</li>
</ul>

<pre><code>git remote add prod file:///path/to/repo/</code></pre>

<ul>
<li>Use a server of choice to serve the site. Here I choose <a href="http://php.net/" >PHP</a>'s built in server.</li>
</ul>

<pre><code>cd /path/to/deploy/.curr/
php -S localhost:8080</code></pre>

<h2>Motivation</h2>

<p>As I want to put my blog on Github's pages with my custom domain, I need the generator to put a file named <code>CNAME</code>, whose content is my custom domain name, in the root of the generated site. However, currently coleslaw only recognizes files with <code>post</code> extension, along with files in the <code>static</code> folder, and does not allow putting custom files in the root of the site. I need to hack up a way to generate that <code>CNAME</code> file under the root of the site.</p>

<h2>Forking the code</h2>

<p>The usual workflow on Github is to fork the code, hack on it, commit and then send a pull request to the original author.</p>

<p>After forking the code and cloning it to my machine, I need to setup Quicklisp's quickproject according to <a href="http://xach.livejournal.com/278047.html" >this</a> so that it sees my code.</p>

<p>Since I have generated the posts using coleslaw, Quicklisp must have pulled the code from its repository. For safety, I uninstall Quicklisp's coleslaw.</p>

<pre><code><span class="code"><span class="comment">;; start sbcl and load Quicklisp's setup.lisp
</span><span class="paren1">(<span class="code">use-package <span class="keyword">:ql-dist</span></span>)</span>
<span class="paren1">(<span class="code">uninstall <span class="paren2">(<span class="code">release <span class="string">"coleslaw"</span></span>)</span></span>)</span>
<span class="comment">; instructions gotten from https://groups.google.com/forum/?fromgroups=#!topic/quicklisp/CvB3mwsL7l4</span></span></code></pre>

<h2>Hack on it</h2>

<p>I add a property to class <code>blog</code> in order to capture user's intent to integrate with Github's pages.</p>

<pre><code><span class="code"><span class="comment">; in src/config.lisp
</span><span class="paren1">(<span class="code"><i><span class="symbol">defclass</span></i> blog <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code">
   <span class="comment">; [...]
</span>   <span class="paren3">(<span class="code">github <span class="keyword">:initarg</span> <span class="keyword">:github</span> <span class="keyword">:initform</span> nil <span class="keyword">:accessor</span> github</span>)</span>
   <span class="comment">; [...]
</span>   </span>)</span></span>)</span></span></code></pre>

<p>And then the code to actually generate the <code>CNAME</code> file</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defgeneric</span></i> deploy <span class="paren2">(<span class="code">staging</span>)</span>
  <span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="paren4">(<span class="code">
        <span class="comment">; [...]
</span>        <span class="paren5">(<span class="code">run-program <span class="string">"mv ~a ~a"</span> staging new-build</span>)</span>
        <span class="paren5">(<span class="code">when <span class="paren6">(<span class="code">github <span class="special">*config*</span></span>)</span>
          <span class="paren6">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren1">(<span class="code"><span class="paren2">(<span class="code">cname-filename <span class="paren3">(<span class="code">rel-path <span class="string">""</span> <span class="string">"~a/CNAME"</span> new-build</span>)</span></span>)</span>
                <span class="paren2">(<span class="code">stripped-url <span class="paren3">(<span class="code">subseq <span class="paren4">(<span class="code">domain <span class="special">*config*</span></span>)</span>
                                      <span class="paren4">(<span class="code">+ 2 <span class="paren5">(<span class="code">position <span class="character">#\/</span> <span class="paren6">(<span class="code">domain <span class="special">*config*</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
            <span class="paren1">(<span class="code"><i><span class="symbol">with-open-file</span></i> <span class="paren2">(<span class="code">cname cname-filename
                                   <span class="keyword">:direction</span> <span class="keyword">:output</span>
                                   <span class="keyword">:if-exists</span> <span class="keyword">:supersede</span></span>)</span>
              <span class="paren2">(<span class="code">format cname <span class="string">"~a~%"</span> stripped-url</span>)</span></span>)</span></span>)</span></span>)</span>
        <span class="paren5">(<span class="code">when <span class="paren6">(<span class="code">probe-file prev</span>)</span>
        <span class="comment">; [...]
</span>        </span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre>

<h2>(Not) Send a pull request to the original author</h2>

<p>Since the way I pulled out the domain name from the <code>blog</code> object is very ad-hoc, I don't think this code is production quality yet. I should write a separate library to parse the url and then use that to robustly extract the domain name. Until then, I won't send a pull request to the original author.</p>
 ]]></description> </item><item> <title>How to set up NTUVPN on Ubuntu</title> <link>http://minhdo.org/posts/How-to-set-up-NTUVPN-on-Ubuntu.html</link> <pubDate>2013-03-06 09:17:00</pubDate> <author>Do Nhat Minh</author> <guid isPermaLink="true">http://minhdo.org/posts/How-to-set-up-NTUVPN-on-Ubuntu.html</guid> <category><![CDATA[ #<TAG {1008876503}> ]]></category><category><![CDATA[ #<TAG {1008876523}> ]]></category><category><![CDATA[ #<TAG {1008876543}> ]]></category><category><![CDATA[ #<TAG {1008876563}> ]]></category> <description><![CDATA[ 

<p><em>For Ubuntu users, the NTU's <a href="http://www.ntu.edu.sg/cits/itnetworking/remoteaccess/Pages/quickstartguide.aspx#sslvpn" >official instruction</a> to setup a <a href="http://en.wikipedia.org/wiki/Vpn" title="Virtual private network">VPN</a> client requires them to install a java plugin in order to connect to its server. However, the client can only run on a 32-bit JVM, and even if it is running on one, the client seems to hang. Therefore, to save you from all these hassles, this post will help you set up a VPN client that runs natively on Ubuntu.</em></p>

<h2>Installing the required package</h2>

<p>Firstly, you need to install the <a href="http://en.wikipedia.org/wiki/Pptp" >PPTP</a> plugin for Network Manager, which provides a PPTP VPN plugin to connect to a Microsoft VPN server.</p>

<p>Open up your Terminal and type in</p>

<pre><code>sudo apt-get install network-manager-pptp</code></pre>

<p>Enter your password if required and wait until it finishes installing.</p>

<h2>Setting up a VPN connection</h2>

<p>Click on the Network Manager icon, select <code>VPN Connections</code> and choose <code>Configure VPN...</code></p>

<p>In the <code>Choose a VPN Connection Type</code> dialog, select <code>Point-to-Point Tunneling Protocol (PPTP)</code> and click <code>Create</code></p>

<p>In the newly opened dialog, type in the following:</p>

<ul>
<li><code>Connection name:</code> &rarr; <code>NTUVPN</code></li>
<li><code>Gateway:</code> &rarr; <code>vpngate.ntu.edu.sg</code></li>
<li><code>User name:</code> &rarr; your NTU user name, prefixed by <code>STUDENT\</code>, e.g. <code>STUDENT\name1</code></li>
<li><code>Password:</code> &rarr; your password</li>
</ul>

<p>Click on <code>Advanced...</code>, tick <code>Use Point-to-Point encryption (MPPE)</code>, and click <code>OK</code></p>

<p>Finally, click <code>Save...</code></p>

<h2>Connect to NTUVPN</h2>

<p>Click on the Network Manager icon, select <code>VPN Connections</code> and choose the newly created <code>NTUVPN</code>. The connection should be established now.</p>

<h2>Disconnect from NTUVPN</h2>

<p>To disconnect from NTUVPN, click on the Network Manager icon, select <code>VPN Connections</code> and choose <code>Disconnect VPN</code></p>
 ]]></description> </item><item> <title>Hello, JIT World from D</title> <link>http://minhdo.org/posts/Hello-JIT-World-from-D.html</link> <pubDate>2013-01-15 00:00:00</pubDate> <author>Do Nhat Minh</author> <guid isPermaLink="true">http://minhdo.org/posts/Hello-JIT-World-from-D.html</guid> <category><![CDATA[ #<TAG {10088764A3}> ]]></category><category><![CDATA[ #<TAG {10088764C3}> ]]></category><category><![CDATA[ #<TAG {10088764E3}> ]]></category> <description><![CDATA[ 

<p><em>This post is inspired by <a href="http://blog.reverberate.org/2012/12/hello-jit-world-joy-of-simple-jits.html" >Hello, JIT World: The Joy of Simple JITs</a>, especially the first short program that he used to demonstrate that JIT programming can be simple. In this post, I will convert the program he wrote in C to <a href="http://en.wikipedia.org/wiki/D_(programming_language)" >D</a> to show some capabilities and convenience of D.</em></p>

<p>What follows is the whole source of the program in D. You can view the original source in C in the blog post linked above.</p>

<pre><code>import std.c.string;
import std.c.linux.linux;
import std.conv;
import std.stdio;

int main(string[] args)
{
    // Machine code for:
    //   mov eax, 0
    //   ret
    ubyte code[] = [0xb8, 0x00, 0x00, 0x00, 0x00, 0xc3];

    if (args.length < 2)
    {
        stderr.writeln("Usage: jit1 <integer>");
        return 1;
    }

    // Overwrite immediate value "0" in the instruction
    // with the user's value.  This will make our code:
    //   mov eax, <user's value>
    //   ret
    int num = to!int(args[1]);
    memcpy(&code[1], &num, 4);

    // Allocate writable/executable memory.
    // Note: real programs should not map memory both writable
    // and executable because it is a security risk.
    void* mem = mmap(null, code.sizeof, PROT_WRITE | PROT_EXEC,
            MAP_ANON | MAP_PRIVATE, -1, 0);
    memcpy(mem, code, code.sizeof);

    // The function will return the user's value.
    int function() func = cast(int function())mem;
    return func();
}</code></pre>

<p>Let's go through some first impressions.</p>

<p>D programming language is in the same family of languages that have the C flavor, so you might already find the code familiar and quite easy to read. Some familiarities are</p>

<ul>
<li>double forward slashes starts a line comment</li>
</ul>

<pre><code>// a line comment which extends only to the end of the line</code></pre>

<ul>
<li>curly braces around a block of code</li>
</ul>

<pre><code>{
    // block of code
}</code></pre>

<ul>
<li>every statement ends in a semicolon</li>
</ul>

<pre><code>statement; // assuming you have statement defined</code></pre>

<ul>
<li>type goes before the identifier in a declaration</li>
</ul>

<pre><code>int a;
long b;</code></pre>

<ul>
<li>all executions start from the <code>main</code> function which can have one of the following signatures</li>
</ul>

<pre><code>int main();
int main(string[]);
void main();
void main(string[]);</code></pre>

<ul>
<li>and unlike C (or C++ for that matter), the D standard actually have <code>void main(...)</code> functions return 0 (which means success) to the shell.</li>
<li>indexing operator is <code>[]</code></li>
</ul>

<pre><code>int[2] a;
a[1] = 1; // use this to index into the second element of a</code></pre>

<ul>
<li>address-of operator is <code>&amp;</code></li>
</ul>

<pre><code>int a;
int* b = &a;</code></pre>

<ul>
<li>from the above example you can also see that there are pointer types in D and the syntax for declaring one is just like C's</li>
<li>there's actually a <code>null</code> value for pointers, not just a cast from zero as in C</li>
<li>bitwise operators in D are the same as in C, e.g. <code>|</code>, <code>&amp;</code> and <code>~</code></li>
<li>you can cast from one time to another, which is not recommended unless you know exactly what you are doing as the safe subset of D is powerful enough for most applications, by doing</li>
</ul>

<pre><code>void* a;
char* b = cast(char*)a;</code></pre>

<ul>
<li>syntax for returning from a function is</li>
</ul>

<pre><code>return expression; // where expression is any expression, e.g. 1 + 1</code></pre>

<p>So D is quite similar to C/C++. But the differences that set D apart is even more interesting.</p>

<ul>
<li>there is a concept of modules that can <code>import</code> each other, so that a source file does not have to be processed so many times in compilation (well, there's more to this but the reduction in compilation time that comes with this is, to me, the most significant benefit)</li>
<li>string is actually supported, not something that feels bolted on like in C (or C++)</li>
<li>there's no <code>unsigned</code> keyword. Most types have their unsigned counterparts named with a <code>u</code> prepended.</li>
<li>arrays know their own lengths, which can be accessed by doing</li>
</ul>

<pre><code>int[200] a;
writeln(a.length); // assuming you have `import std.stdio;` before this.
// Prints out 200.</code></pre>

<ul>
<li><code>to</code> in <code>to!int</code> is a generic function (and you specialize it using the bang-type syntax). The syntax, though unfamiliar, but greatly simplifies parsing, both for compilers and for humans.</li>
<li>C code can be called directly from D after creating declarations for it. The function <code>memcpy</code> and <code>mmap</code> are C functions whose declarations are defined in packages <code>string</code> and <code>linux</code>.</li>
<li>the size of some variable in bytes can be obtained from doing <code>variable.sizeof</code></li>
<li>any pointer type is automatically convertible to <code>void*</code>, not so for the converse.</li>
<li>there is a <code>function</code> keyword so that the type of a function pointer or complex types can be declared without hurting your brain</li>
</ul>

<pre><code>// fp is a pointer to a function that takes a function taking a char
// returning an int and returns a typeless pointer
// (try saying that five times fast)
void* function(int function(char)) fp;
// the equivalent for that in C is
// void* (*fp)(int (*)(char));

// let's look at something more interesting
// signal is a function that takes an int and a pointer to a function
// taking an int returning nothing and returns a pointer to a function
// taking an int returning nothing
void function(int) signal(int sig, void function(int) func));
// the equivalent for that in C is
// void (*signal (int sig, void (*func)(int)) )(int);
// try reading that five times fast :)</code></pre>

<p>Those are the differences that are present in this code snippet, you can check out more about D at the <a href="http://dlang.org" >D home page</a> or a summary at the <a href="http://en.wikipedia.org/wiki/D_(programming_language)" >wikipedia page</a>.</p>
 ]]></description> </item><item> <title>Maths and Programs</title> <link>http://minhdo.org/posts/Maths-and-Programs.html</link> <pubDate>2012-10-01 00:00:00</pubDate> <author>Do Nhat Minh</author> <guid isPermaLink="true">http://minhdo.org/posts/Maths-and-Programs.html</guid> <category><![CDATA[ #<TAG {100780D9F3}> ]]></category><category><![CDATA[ #<TAG {100780DC73}> ]]></category><category><![CDATA[ #<TAG {100780DED3}> ]]></category> <description><![CDATA[ 

<p>Let's solve this question (taken from the second assignment of <a href="https://www.coursera.org/course/progfun" >Functional Programming in Scala</a>):</p>

<blockquote>
<p>Using <code>forall</code>, implement a function <code>exists</code> which tests whether a set contains at least one element for which the given predicate is true. Note that the functions <code>forall</code> and <code>exists</code> behave like the universal and existential quantifiers of first-order logic.</p>
</blockquote>

<p>The code listing for <code>forall</code> is as follows:</p>

<pre><code>def forall(s: Set, p: Int => Boolean): Boolean = {
  def iter(a: Int): Boolean = {
    if (a > bound) true
    else if (contains(s, a) && !p(a)) false
    else iter(a + 1)
  }
  iter(-bound)
}</code></pre>

<p>where <code>bound</code> is <code>1000</code>.</p>

<p>A set is a defined as follows, along with the predicate to test for containment.</p>

<pre><code>type Set = Int => Boolean
def contains(s: Set, x: Int) = s(x)</code></pre>

<p>Here is how I arrive at the answer for the question:</p>

<blockquote>
<ol>
<li>From the question, it is intuitive to try to stop the iteration when there is an element that satisfies the predicate <code>p</code>, which is exactly what <code>exists</code> should do.</li>
<li>The iteration is stopped only when the current element <code>a</code> does not satisfy <code>p</code>.</li>
<li>However, we need to satisfy <code>p</code> in order for <code>exists</code> to correctly do its job.</li>
</ol>

<p>In conclusion, we need a double negation here. In other words, we need to negate <code>p</code> and then negate the answer returned by <code>forall</code> when called with the negation of <code>p</code>.</p>
</blockquote>

<p>From that reasoning, it is easy to code up the first attempt at a solution.</p>

<pre><code>def exists(s: Set, p: Int => Boolean): Boolean = !forall(s, x => !p(x))</code></pre>

<p>Now, let's see how this solution fares.</p>

<pre><code>scala> def natural = (x: Int) => x > 0
scala> forall(natural, x % 2 == 0) // should return false, as not all naturals are even
Res01 = false
scala> exists(natural, x % 2 == 0) // should return true
Res02 = true</code></pre>

<p>The solution passes the tests. Let's look at how to explain the code simply. The code says</p>

<blockquote>
<p>There exists in set <code>s</code> an element that satisfies the predicate <code>p</code> when not all of the elements in <code>s</code> satisfies the negation of <code>p</code>.</p>
</blockquote>

<p>That makes sense. But lo and behold, the code reflects a mathematical truth, and it even looks like it is translated verbatim from mathematical symbols to programmatical symbols!</p>

<p>&exist;x:P(x) &equiv; &not;&forall;x:&not;P(x)</p>

<p>compared with</p>

<pre><code>def exists(s: Set, p: Int => Boolean): Boolean = !forall(s, x => !p(x))</code></pre>

<p>The correspondence is remarkable!</p>

<p>After reading this post, you should try this question. The answer will pleasantly surprise you.</p>

<blockquote>
<p>Finally, write a function <code>map</code> which transforms a given set into another one by applying to each of its element the given function. <code>map</code> has the following signature:</p>
</blockquote>

<pre><code>def map(s: Set, f: Int => Int): Set</code></pre>
 ]]></description> </item><item> <title>Zen in Gödel, Escher and Bach: An Eternal Golden Braid</title> <link>http://minhdo.org/posts/Zen-in-Gdel-Escher-and-Bach-An-Eternal-Golden-Braid.html</link> <pubDate>2012-09-26 00:00:00</pubDate> <author>Do Nhat Minh</author> <guid isPermaLink="true">http://minhdo.org/posts/Zen-in-Gdel-Escher-and-Bach-An-Eternal-Golden-Braid.html</guid> <category><![CDATA[ #<TAG {10082886D3}> ]]></category><category><![CDATA[ #<TAG {10082886F3}> ]]></category><category><![CDATA[ #<TAG {1008288713}> ]]></category><category><![CDATA[ #<TAG {1008288733}> ]]></category><category><![CDATA[ #<TAG {1008288753}> ]]></category> <description><![CDATA[ 

<blockquote>
<p>[...] in general, the Zen attitude is that words and truth are incompatible, or at least that no words can capture truth.</p>
</blockquote>

<p align="right">page 246</p>

<blockquote>
<p>[...] Perhaps the most concise summary of enlightenment would be: trainscending dualism.</p>
</blockquote>

<p align="right">page 251</p>

<blockquote>
<p>[...] it is perhaps wrong to say that the enemy of enlightenment is logic; rather, it is dualistic, verbal thinking. In fact, it is even more basic than that: it is perception. As soon as you perceive an object, you draw a line between it and the rest of the world; you divide the world, artificially, into parts, and you thereby miss the Way.</p>
</blockquote>

<p align="right">page 251</p>

<blockquote>
<p>Zen is holism, carried to its logical extreme. If holism claims that things can only be understood as wholes, not as sums of their parts, Zen goes one further, in maintaining that the world cannot be broken into parts at all. To divide the world into parts is to be deluded, and to miss enlightenment.</p>
</blockquote>

<p align="right">page 254</p>

<blockquote>
<p>Zen is a system and cannot be its own metasystem; there is always something outside of Zen, which cannot be fully understood or described within Zen.</p>
</blockquote>

<p align="right">page 255</p>

<p>Taken from <a href="http://en.wikipedia.org/wiki/G%C3%B6del,_Escher,_Bach" >Gödel, Escher and Bach: An Eternal Golden Braid</a> by <a href="http://en.wikipedia.org/wiki/Douglas_Hofstadter" >Douglas R. Hofstadter</a>.</p>
 ]]></description> </item><item> <title>Setting for NTU MailBox</title> <link>http://minhdo.org/posts/Setting-for-NTU-MailBox.html</link> <pubDate>2012-09-11 00:00:00</pubDate> <author>Do Nhat Minh</author> <guid isPermaLink="true">http://minhdo.org/posts/Setting-for-NTU-MailBox.html</guid> <category><![CDATA[ #<TAG {10080396F3}> ]]></category><category><![CDATA[ #<TAG {1008039713}> ]]></category><category><![CDATA[ #<TAG {1008039733}> ]]></category><category><![CDATA[ #<TAG {1008039753}> ]]></category> <description><![CDATA[ <p>External POP setting:</p>

<ul>
<li>Server name: pod51003.outlook.com</li>
<li>Port: 995</li>
<li>Encryption method: SSL</li>
</ul>

<p>External IMAP setting:</p>

<ul>
<li>Server name: pod51003.outlook.com</li>
<li>Port: 993</li>
<li>Encryption method: SSL</li>
</ul>

<p>External SMTP setting:</p>

<ul>
<li>Server name: pod51003.outlook.com</li>
<li>Port: 587</li>
<li>Encryption method: TLS</li>
</ul>

<p>They can be found on the About page of the web app.</p>
 ]]></description> </item> </channel> </rss>
